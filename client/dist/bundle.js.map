{"version":3,"sources":["webpack:///webpack/bootstrap 1605f179a375da80c789","webpack:///./main.js","webpack:///./lib/Renderer.js","webpack:///./lib/Abstract.js","webpack:///./lib/generators.js","webpack:///./lib/Vector2.js","webpack:///./lib/World.js","webpack:///./lib/input.js","webpack:///./communication.js","webpack:///./game/JetPackGame.js","webpack:///./lib/Entity.js","webpack:///./lib/Sprite.js","webpack:///./game/Soldier.js","webpack:///./game/Bullet.js","webpack:///./game/Ground.js"],"names":["canvas","document","createElement","game","renderer","world","token","frame","debug","offset","renderSoldierInfo","soldier","li","percentage","health","innerHTML","name","points","killed","classList","add","onPoints","createInfo","info","getElementById","rows","concat","soldiers","sort","a","b","map","forEach","appendChild","row","init","width","height","keyboard","mouse","calcOffset","cancelAnimationFrame","loop","window","setOffset","tick","render","requestAnimationFrame","rect","getClientRects","x","left","y","top","resize","addEventListener","Renderer","ctx","getContext","body","clearRect","children","child","Abstract","id","parent","unshift","index","indexOf","undefined","splice","getNextId","getRandomName","ids","firstNames","lastNames","Math","round","random","length","check","vec","Vector2","currentX","currentY","previousX","previousY","Object","defineProperty","set","value","get","scalar","v","sqrt","lengthSqre","divideScalar","pow","abs","min","max","maxLength","lengthSquared","ratio","vec1","vec2","CCW","p1","p2","p3","World","friction","gravity","p4","entityA","entityB","collision","normal","n","position","size","rv","subVecs","velocity","directionAX","directionAY","directionBX","directionBY","towardsOnX","right","towardsOnY","bottom","velAlongNormal","dotProduct","e","restitution","j","mass","impulse","isFixed","sub","i","l","entity","acceleration","noGrav","noFriction","multiplyScalar","clamp","maxSpeed","entities","canCollide","getCollision","resolveCollision","KEYS","getKeyName","keyCode","oldX","oldY","offsetX","offsetY","pageX","pageY","dx","dy","button","which","msg","type","socket","WebSocket","onopen","send","JSON","strigify","onmessage","msgraw","console","log","parse","SOLDIERS","KILL_POINTS","SINGLE_HIT_POINTS","JetPackGame","createGround","createSoldiers","distance","onKill","bind","push","myself","c","w","fire","setTarget","up","down","s","d","remove","keyboardHandler","mouseHandler","handleBulltes","addPoints","killerId","getSoldierById","filter","checkLifetime","ownerId","addDamage","damagePoints","Entity","target","rotation","targetingEnabled","dontCollideWith","targetAngle","atan2","prototype","drawDebug","call","cx","cy","save","globalAlpha","strokeStyle","beginPath","radius","cos","sin","arc","PI","stroke","closePath","restore","move","copy","getTargetAngle","Sprite","fillStyle","fill","lineSize","moveTo","lineTo","sprite","draw","drawChildren","MAX_HEALTH","SOLDIER_WIDTH","SOLDIER_HEIGHT","Soldier","damage","kill","fillText","bullet","normalize","BULLET_LIFETIME","Bullet","startFrame","currentFrame","Ground"],"mappings":"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","file":"dist/bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 1605f179a375da80c789\n **/","import Renderer from './lib/Renderer';\nimport Vector2 from './lib/Vector2';\nimport World from './lib/World';\nimport {keyboard, mouse} from './lib/input';\nimport {socket} from './communication';\n\nimport Game from './game/JetPackGame';\n\nvar canvas = document.createElement('canvas');\nvar game, renderer, world, token, frame = 0;\nvar debug = true;\nvar offset = new Vector2();\n\nfunction renderSoldierInfo(soldier) {\n  let li = document.createElement('li');\n  let percentage = soldier.health * 100;\n  li.innerHTML = `\n    <strong>${soldier.name}</strong>\n    <span class=\"health\">\n     <span class=\"health-bar\" style=\"width:${percentage}%\"></span> \n    </span>\n    <div class=\"points\">Points: ${soldier.points || 0}</div>\n  `;\n  if (soldier.killed) {\n    li.classList.add('killed')\n  }\n  return li;\n}\n\nfunction onPoints(soldier, points, game) {\n  createInfo(game);\n}\n\nfunction createInfo(game) {\n  let info = document.getElementById('info');\n  info.innerHTML = '';\n  let rows = [].concat(game.world.soldiers).sort((a, b) => {\n    if (a.points < b.points) {\n      return 1;\n    }\n    if (a.points > b.points) {\n      return -1;\n    }\n  }).map(soldier => renderSoldierInfo(soldier));\n  rows.forEach(row => info.appendChild(row));\n}\n\nfunction init() {\n  canvas.width = 680;\n  canvas.height = 460;\n  document.getElementById('canvas').appendChild(canvas);\n  renderer = new Renderer({canvas});\n  world = new World();\n  game = new Game({world, renderer, keyboard, mouse, onPoints: function (soldier, points) {\n    onPoints(soldier, points, game)\n  }});\n  calcOffset();\n  cancelAnimationFrame(token);\n  loop();\n  createInfo(game);\n\n  window.game = game;\n}\n\nfunction loop() {\n  frame++;\n  mouse.setOffset(offset);\n  game.tick(frame);\n  renderer.render(frame, debug);\n  token = requestAnimationFrame(loop);\n}\n\nfunction calcOffset() {\n  let rect = canvas.getClientRects()[0];\n  offset.x = rect.left;\n  offset.y = rect.top;\n  \n}\n\nfunction resize() {\n  calcOffset();\n}\n\nwindow.addEventListener('load', init);\nwindow.addEventListener('resize', resize);\n\n\n/** WEBPACK FOOTER **\n ** ./main.js\n **/","import Abstract from './Abstract';\n\nexport default class Renderer extends Abstract {\n  constructor({canvas}) {\n    super();\n    this.canvas = canvas;\n    this.ctx = canvas.getContext('2d');\n    this.resize();\n  }\n\n  resize() {\n    let rect = document.body.getClientRects()[0];\n    this.canvas.width = rect.width;\n    this.canvas.height = rect.height;\n    return this;\n  }\n\n  render(frame, debug) {\n    this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n    this.children.forEach(child => child.render(this.ctx, frame, debug));\n    return this;\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/Renderer.js\n **/","import {getNextId} from './generators';\r\n\r\nexport default class Abstract {\r\n  constructor() {\r\n  \tthis.id = getNextId();\r\n  \tthis.children = [];\r\n  }\r\n\r\n  add(child) {\r\n    child.parent = this;\r\n    this.children.unshift(child);\r\n  }\r\n\r\n  remove(child) {\r\n    let index = this.children.indexOf(child);\r\n    child.parent = undefined;\r\n    this.children.splice(index, 1);\r\n  }\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./lib/Abstract.js\n **/","let ids = 0;\r\n\r\nexport function getNextId () {\r\n  return ids++;\r\n}\r\n\r\nlet firstNames = [\r\n  'Barbara',\r\n  'Alojzy',\r\n  'Hermenegilda',\r\n  'Ambrozja',\r\n  'Grafira',\r\n  'Glazuria',\r\n  'Gleb',\r\n  'Zbylut',\r\n  'Majkiel',\r\n  'Fabrycjo'\r\n];\r\n\r\nlet lastNames = [\r\n  'Nowak',\r\n  'Kowalski',\r\n  'Miksa',\r\n  'Szymkowskyy',\r\n  'Koldwind'\r\n];\r\n\r\nexport function getRandomName() {\r\n  return firstNames[Math.round(Math.random() * (firstNames.length -1))] + ' ' +\r\n          lastNames[Math.round(Math.random() * (lastNames.length -1))]\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/generators.js\n **/","function check(vec) {\n  if (typeof vec !== 'object' || typeof vec.x !== 'number' || typeof vec.y !== 'number') {\n    throw 'Vector2 expected';\n  }\n}\nexport default class Vector2 {\n  constructor(x = 0, y = 0) {\n    this.currentX = 0;\n    this.currentY = 0;\n    this.previousX = 0;\n    this.previousY = 0;\n    Object.defineProperty(this, 'x', {\n      set: function(value) {\n        this.previousX = this.currentX;\n        this.currentX = value;\n      },\n      get: function() {\n        return this.currentX;\n      }\n    });\n    Object.defineProperty(this, 'y', {\n      set: function(value) {\n        this.previousY = this.currentY;\n        this.currentY = value;\n      },\n      get: function() {\n        return this.currentY;\n      }\n    });\n    this.x = x;\n    this.y = y;\n  }\n  set(x, y) {\n    if (typeof x === 'number') {\n      this.x = x;\n    }\n    if (typeof y === 'number') {\n      this.y = y;\n    }\n  }\n  copy(vec) {\n    check(vec);\n    this.x = vec.x;\n    this.y = vec.y;\n    return this;\n  }\n  add(vec) {\n    check(vec);\n    this.x += vec.x;\n    this.y += vec.y;\n    return this;\n  }\n  sub(vec) {\n    check(vec);\n    this.x -= vec.x;\n    this.y -= vec.y;\n    return this;\n  }\n  multiply(vec) {\n    check(vec);\n    this.x *= vec.x;\n    this.y *= vec.y;\n    return this;\n  }\n  multiplyScalar(scalar) {\n    this.x *= scalar;\n    this.y *= scalar;\n    return this;\n  }\n  divide(vec) {\n    check(vec);\n    this.x /= vec.x;\n    this.y /= vec.y;\n    return this;\n  }\n  divideScalar(scalar) {\n    var v = scalar !== 0 ? 1 / scalar : 0;\n    this.x *= v;\n    this.y *= v;\n    return this;\n  }\n  min(vec) {\n    check(vec);\n    if (this.x > vec.x) {\n      this.x = vec.x;\n    }\n    if (this.y > vec.y) {\n      this.y = vec.y;\n    }\n    return this;\n  }\n  max(vec) {\n    check(vec);\n    if (this.x < vec.x) {\n      this.x = vec.x;\n    }\n    if (this.y < vec.y) {\n      this.y = vec.y;\n    }\n    return this;\n  }\n  dot(vec) {\n    check(vec);\n    return this.x * vec.x + this.y * vec.y;\n  }\n  length() {\n    return Math.sqrt(this.lengthSqre());\n  }\n  lengthSqre() {\n    return this.x * this.x + this.y * this.y;\n  }\n  normalize() {\n    return this.divideScalar(this.length());\n  }\n  distanceTo(vec) {\n    check(vec);\n    return Math.sqrt(Math.pow(vec.x - this.x, 2) +\n    Math.pow(vec.y - this.y, 2));\n  }\n  mag() {\n    return Math.abs(Math.sqrt(Math.pow(this.x, 2) +\n    Math.pow(this.y, 2)));\n  }\n  clamp(min, max) {\n    if (this.x < min) {\n      this.x = min;\n    }\n    else if (this.x > max) {\n      this.x = max;\n    }\n    if (this.y < min) {\n      this.y = min;\n    }\n    else if (this.y > max) {\n      this.y = max;\n    }\n    return this;\n  }\n  limit(maxLength) {\n    var lengthSquared = this.lengthSqre();\n    if ((lengthSquared > maxLength * maxLength) && (lengthSquared > 0)) {\n      var ratio = maxLength / Math.sqrt(lengthSquared);\n      this.x *= ratio;\n      this.y *= ratio;\n    }\n    return this;\n  }\n  static subVecs(vec1, vec2) {\n    check(vec1);\n    check(vec2);\n    return new Vector2(vec1.x - vec2.x, vec1.y - vec2.y);\n  }\n  static addVecs(vec1, vec2) {\n    check(vec1);\n    check(vec2);\n    return new Vector2(vec1.x + vec2.x, vec1.y + vec2.y);\n  }\n  static multiplyVecs(vec1, vec2) {\n    check(vec1);\n    check(vec2);\n    return new Vector2(vec1.x * vec2.x, vec1.y * vec2.y);\n  }\n  static dotProduct(vec1, vec2) {\n    check(vec1);\n    check(vec2);\n    return vec2.x * vec1.x + vec2.y * vec1.y;\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/Vector2.js\n **/","import Abstract from './Abstract';\r\nimport Vector2 from './Vector2';\r\n\r\nfunction CCW(p1, p2, p3) {\r\n  return (p3.y - p1.y) * (p2.x - p1.x) > (p2.y - p1.y) * (p3.x - p1.x);\r\n}\r\n\r\nexport default class World extends Abstract {\r\n  constructor() {\r\n    super();\r\n    this.friction = 0.975;\r\n    this.gravity = new Vector2(0, 0.2);\r\n  }\r\n\r\n  \r\n  linesAreIntersecting(p1, p2, p3, p4) {\r\n    return (CCW(p1, p3, p4) != CCW(p2, p3, p4)) && (CCW(p1, p2, p3) != CCW(p1, p2, p4));\r\n  }\r\n\r\n  resolveCollision(entityA, entityB, collision) {\r\n      var normal = new Vector2;\r\n      var n = new Vector2(\r\n        (entityB.position.x + entityB.size.x / 2) - (entityA.position.x + entityA.size.x / 2),\r\n        (entityB.position.y + entityB.size.y / 2) - (entityA.position.y + entityA.size.y / 2)\r\n      );\r\n\r\n      // Calculate relative velocity\r\n      var rv = Vector2.subVecs(entityB.velocity, entityA.velocity);\r\n\r\n      let directionAX = entityA.velocity.previousX - entityA.velocity.currentX; \r\n      let directionAY = entityA.velocity.previousY - entityA.velocity.currentY; \r\n      let directionBX = entityB.velocity.previousX - entityB.velocity.currentX; \r\n      let directionBY = entityB.velocity.previousY - entityB.velocity.currentY; \r\n    \r\n      let towardsOnX = (directionAX >= 0 && directionBX <= 0 && collision.left) || (directionAX <= 0 && directionBX >= 0 && collision.right);\r\n      let towardsOnY = (directionAY >= 0 && directionBY <= 0 && collision.top) || (directionAY <= 0 && directionBY >= 0 && collision.bottom);\r\n\r\n      if (Math.abs(n.x) > Math.abs(n.y)) {\r\n        if (n.x < n.y) {\r\n          normal = new Vector2(-1, 0);\r\n        } else {\r\n          normal = new Vector2(1, 0)\r\n        }\r\n      } else {\r\n        if (n.x < n.y) {\r\n          normal = new Vector2(0, 1);\r\n        } else {\r\n          normal = new Vector2(0, -1)\r\n        }\r\n      }\r\n\r\n      // Calculate relative velocity in terms of the normal direction\r\n      var velAlongNormal = Vector2.dotProduct(rv, normal);\r\n      if(velAlongNormal > 0) {\r\n        return;\r\n      }\r\n      // Calculate restitution\r\n      var e = Math.min(entityA.restitution, entityB.restitution);\r\n      // Calculate impulse scalar\r\n      var j  = -(1 + e) * velAlongNormal;\r\n      \r\n      j /= 1 / entityA.mass + 1 / entityB.mass;\r\n\r\n      // Apply impulse\r\n      var impulse = new Vector2(j * normal.x, j * normal.y);\r\n\r\n      if (!entityA.isFixed) {\r\n        entityA.velocity.sub({\r\n          x : 1 / entityA.mass * impulse.x,\r\n          y : 1 / entityA.mass * impulse.y \r\n        });\r\n      }\r\n      \r\n      if (!entityB.isFixed) {\r\n        entityB.velocity.add({\r\n          x : 1 / entityB.mass * impulse.x, \r\n          y : 1 / entityB.mass * impulse.y \r\n        });\r\n      }\r\n  }\r\n\r\n  getCollision(entityA, entityB) {\r\n    let top = entityA.position.y + entityA.size.y >= entityB.position.y && entityA.position.y + entityA.size.y <= entityB.position.y + entityB.size.y / 2;\r\n    let bottom = entityA.position.y + entityA.size.y >= entityB.position.y + entityB.size.y / 2 && entityA.position.y <= entityB.position.y + entityB.size.y;\r\n    let left = entityA.position.x + entityA.size.x >= entityB.position.x && entityA.position.x + entityA.size.x <= entityB.position.x + entityB.size.x / 2;\r\n    let right = entityA.position.x + entityA.size.x >= entityB.position.x + entityB.size.x / 2 && entityA.position.x <= entityB.position.x + entityB.size.x;\r\n    let x = left || right;\r\n    let y = top || bottom;\r\n    return {\r\n      x, y, top, left, bottom, right\r\n    }\r\n  }\r\n  \r\n  tick(frame) {\r\n    for (let i = 0, l = this.children.length; i < l; ++i) {\r\n      let entity = this.children[i];\r\n      entity.velocity.add(entity.acceleration);\r\n\r\n      if (!entity.isFixed && !entity.noGrav) {\r\n        entity.velocity.add(this.gravity);\r\n      }\r\n\r\n      if (!entity.noFriction) {\r\n        entity.velocity.multiplyScalar(this.friction);\r\n      }\r\n      entity.velocity.clamp(-entity.maxSpeed, entity.maxSpeed);\r\n      entity.acceleration.multiplyScalar(0);\r\n\r\n      if (!entity.isFixed) {\r\n        var entities = entity.parent.children;\r\n        var collision;\r\n        for (var n in entities) {\r\n            if (entity.canCollide(entities[n])) {\r\n              collision = this.getCollision(entity, entities[n]);\r\n              if (collision.x && collision.y) {\r\n                this.resolveCollision(entity, entities[n], collision);\r\n              }\r\n            }\r\n        }\r\n      }\r\n      entity.position.add(entity.velocity);\r\n    }\r\n  }\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./lib/World.js\n **/","const KEYS = {\r\n  8:  'backspace',\r\n  9:  'tab',\r\n  13: 'enter',\r\n  32: 'space',\r\n  37: 'left',\r\n  38: 'up',\r\n  39: 'right',\r\n  40: 'down',\r\n  87: 'w',\r\n  83: 's',\r\n  65: 'a',\r\n  68: 'd',\r\n  88: 'x',\r\n  89: 'y',\r\n  90: 'z'\r\n}\r\n\r\nfunction getKeyName(keyCode) {\r\n  return KEYS[keyCode] || null;\r\n}\r\n\r\nlet oldX = 0, oldY = 0;\r\nlet offsetX = 0, offsetY = 0;\r\n\r\nwindow.addEventListener('mousemove', e => {\r\n  oldX = mouse.x;\r\n  oldY = mouse.y;\r\n  mouse.x = e.pageX - offsetX; \r\n  mouse.y = e.pageY - offsetY; \r\n  mouse.dx = oldX - mouse.x;\r\n  mouse.dy = oldY - mouse.y;\r\n});\r\n\r\nexport let mouse = {\r\n  button: [false, false, false],\r\n  x: 0,\r\n  y: 0,\r\n  dx: 0,\r\n  dy: 0,\r\n  setOffset(offset) {\r\n    offsetX = offset.x;\r\n    offsetY = offset.y;\r\n  }\r\n};\r\n\r\nexport let keyboard = {};\r\n\r\nfor (let n in KEYS) {\r\n  keyboard[KEYS[n]] = false;\r\n}\r\n\r\nwindow.addEventListener('keydown', e => {\r\n  let keyCode = e.which || e.keyCode;\r\n  keyboard[getKeyName(keyCode)] = true;\r\n});\r\n\r\nwindow.addEventListener('keyup', e => {\r\n  let keyCode = e.which || e.keyCode;\r\n  keyboard[getKeyName(keyCode)] = false;\r\n});\r\n\r\nwindow.addEventListener('mousedown', e => {\r\n  mouse.button[e.button] = true;\r\n});\r\n\r\nwindow.addEventListener('mouseup', e => {\r\n  mouse.button[e.button] = false;\r\n});\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/input.js\n **/","var msg = {\n  type: 'hello'\n}\n\nexport var socket = new WebSocket('ws://localhost', 'test');\n\nsocket.onopen = function () {\n  socket.send(JSON.strigify(msg));\n}\n\nsocket.onmessage = function (msgraw) {\n  console.log(JSON.parse(msgraw));\n}\n\n\n/** WEBPACK FOOTER **\n ** ./communication.js\n **/","import Entity from '../lib/Entity';\r\nimport Soldier from './Soldier';\r\nimport Bullet from './Bullet';\r\nimport Ground from './Ground';\r\n\r\nconst SOLDIERS = 4;\r\nconst KILL_POINTS = 100;\r\nconst SINGLE_HIT_POINTS = 1;\r\n\r\nexport default class JetPackGame {\r\n  constructor({renderer, world, keyboard, mouse, onPoints}) {\r\n    this.renderer = renderer;\r\n    this.world = world;\r\n    this.renderer.children = this.world.children;\r\n    this.keyboard = keyboard;\r\n    this.mouse = mouse;\r\n    this.createGround();\r\n    this.createSoldiers();\r\n    this.onPoints = onPoints;\r\n  }\r\n\r\n  createSoldiers() {\r\n    this.world.soldiers = [];\r\n    let x = 20;\r\n    let y = 100;\r\n    let distance = 100;\r\n    let onKill = this.onKill.bind(this);\r\n    for (let i = 0; i < SOLDIERS; ++i) {\r\n      let soldier = new Soldier(i * distance, y, {onKill});\r\n      this.world.soldiers.push(soldier)\r\n    }\r\n    this.world.soldiers.forEach(soldier => this.add(soldier));\r\n    this.myself = this.world.soldiers[0];\r\n  }\r\n\r\n  createGround() {\r\n    var c = 10;\r\n    var w = 64;\r\n    while(c--) {\r\n      this.add(new Ground(w * c, 300, w, w));\r\n    }\r\n  }\r\n\r\n  mouseHandler(frame) {\r\n    if (this.mouse.button[0]) {\r\n      this.world.soldiers[0].fire(frame);\r\n    }\r\n    this.myself.setTarget(this.mouse);\r\n  }\r\n\r\n  keyboardHandler(frame) {\r\n    let v = 0.3;\r\n    if (this.keyboard.up || this.keyboard.w) {\r\n      this.world.soldiers[0].acceleration.y -= v * 1.5;\r\n    }\r\n    if (this.keyboard.down  || this.keyboard.s) {\r\n      this.world.soldiers[0].acceleration.y += v;\r\n    }\r\n    if (this.keyboard.left || this.keyboard.a) {\r\n      this.world.soldiers[0].acceleration.x -= v;\r\n    }\r\n    if (this.keyboard.right || this.keyboard.d) {\r\n      this.world.soldiers[0].acceleration.x += v;\r\n    }\r\n  }\r\n\r\n  add(child) {\r\n    this.world.add(child);\r\n  }\r\n\r\n  remove(child) {\r\n    this.world.remove(child);\r\n  }\r\n\r\n  tick(frame) {\r\n    this.keyboardHandler(frame);\r\n    this.mouseHandler(frame);\r\n    this.world.tick(frame);\r\n    this.handleBulltes(frame);\r\n  }\r\n\r\n  addPoints(soldier, points) {\r\n    soldier.addPoints(points);\r\n    this.onPoints(soldier, points);\r\n  }\r\n\r\n  onKill(killerId) {\r\n    let soldier = getSoldierById(this, killerId);\r\n    this.addPoints(soldier, KILL_POINTS);\r\n  }\r\n\r\n  handleBulltes(frame) {\r\n    let soldiers = this.world.soldiers.filter(s => !s.killed);\r\n    this.world.children.forEach(child => {\r\n      if (child instanceof Bullet) {\r\n        if (child.checkLifetime(frame)) {\r\n          this.world.remove(child);\r\n        }\r\n        for (let n = 0; n < soldiers.length; ++n) {\r\n          if (child.ownerId !== soldiers[n].id) {\r\n            let collision = this.world.getCollision(child, soldiers[n]);\r\n            if (collision.x && collision.y) {\r\n              this.addPoints(getSoldierById(this, child.ownerId), SINGLE_HIT_POINTS);\r\n              soldiers[n].addDamage(child.damagePoints, child.ownerId);\r\n              this.world.remove(child);\r\n            }\r\n          }\r\n        }\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\n\r\nfunction getSoldierById(game, id) {\r\n  return game.world.soldiers.filter(s => s.id === id)[0];\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./game/JetPackGame.js\n **/","import Sprite from './Sprite';\nimport Vector2 from './Vector2';\n\nexport default class Entity extends Sprite {\n  constructor(x, y, width, height) {\n    super(x, y, width, height);\n    this.acceleration = new Vector2();\n    this.velocity = new Vector2();\n    this.target = new Vector2();\n    this.maxSpeed = 10;\n    this.restitution = 1.75;\n    this.mass = 1;\n    this.rotation = 0;\n    this.isFixed = false;\n    this.targetingEnabled = false;\n    this.type = 'entity';\n    this.dontCollideWith = [];\n    this.targetAngle = 0;\n  }\n\n  getTargetAngle() {\n    return  Math.atan2(this.target.y - this.position.y, this.target.x - this.position.x);\n  }\n\n  canCollide(entity) {\n    return entity.id !== this.id && this.dontCollideWith.indexOf(entity.type) == -1;\n  }\n\n  drawDebug(ctx, frame) {\n    Sprite.prototype.drawDebug.call(this, ctx, frame);\n    if (this.targetingEnabled) {\n      let cx = this.position.x + this.size.x / 2;\n      let cy = this.position.y + this.size.y / 2;\n      ctx.save();\n      ctx.globalAlpha = 0.5;\n      ctx.strokeStyle = 'red';\n      ctx.beginPath();\n      let radius = 12;\n      let x = cx + Math.cos(this.targetAngle) * radius;\n      let y = cy + Math.sin(this.targetAngle) * radius;\n      ctx.arc(\n        x,\n        y,\n        3,\n        0,\n        Math.PI * 2,\n        false\n      );\n      ctx.stroke();\n      ctx.closePath();\n      ctx.restore();\n    }\n  }\n\n  move(x = 0, y = 0) {\n    this.acceleration.set(x, y);\n  }\n\n  moveLeft() {\n    this.move(-4, 0);\n  }\n\n  moveUp() {\n    this.move(0, -4);\n  }\n\n  moveRight() {\n    this.move(4, 0);\n  }\n\n  moveDown() {\n    this.move(0, 4);\n  }\n\n  setTarget(vec) {\n    this.target.copy(vec);\n    this.targetAngle = this.getTargetAngle();\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/Entity.js\n **/","import Abstract from './Abstract';\nimport Vector2 from './Vector2';\n\nexport default class Sprite extends Abstract {\n  constructor(x = 0, y = 0, width = 32, height = 32) {\n    super();\n    this.children = [];\n    this.position = new Vector2(x, y);\n    this.size = new Vector2(width, height);\n  }\n\n  drawDebug(ctx, frame) {\n    ctx.save();\n    ctx.globalAlpha = 0.5;\n    ctx.strokeStyle = 'magenta';\n    ctx.fillStyle = 'white';\n    ctx.beginPath();\n    ctx.rect(\n      this.position.x + .5, \n      this.position.y + .5, \n      this.size.x, \n      this.size.y\n    );\n    ctx.fill();\n    ctx.stroke();\n    ctx.closePath();\n    let lineSize = 9;\n    let cx = this.position.x + this.size.x / 2 + .5;\n    let cy = this.position.y + this.size.y / 2 + .5;\n    ctx.beginPath();\n    ctx.moveTo(cx - lineSize, cy);\n    ctx.lineTo(cx + lineSize, cy);\n    ctx.closePath();\n    ctx.stroke();\n    ctx.beginPath();\n    ctx.moveTo(cx, cy - lineSize);\n    ctx.lineTo(cx, cy + lineSize);\n    ctx.closePath();\n    ctx.stroke();\n    ctx.restore();\n  }\n\n  draw(ctx, frame) {}\n\n  drawChildren(ctx, frame, debug) {\n    this.children.forEach(sprite => sprite.render(ctx, frame, debug));\n  }\n\n  render(ctx, frame, debug) {\n    if (debug && ctx) {\n      this.drawDebug(ctx, frame);\n    }\n\n    if (ctx) {\n      this.draw(ctx, frame);\n      this.drawChildren(ctx, frame, debug);\n    }\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/Sprite.js\n **/","import Entity from '../lib/Entity';\nimport Vector2 from '../lib/Vector2';\nimport {getRandomName} from '../lib/generators';\n\nimport Bullet from './Bullet';\n\nconst MAX_HEALTH = 1;\nconst SOLDIER_WIDTH = 32;\nconst SOLDIER_HEIGHT = 32;\n\nexport default class Soldier extends Entity {\n  constructor(x, y, {name = getRandomName(), onKill} = {}) {\n    super(x, y, SOLDIER_WIDTH, SOLDIER_HEIGHT);\n    this.type = 'soldier';\n    this.dontCollideWith = ['bullet'];\n    this.targetingEnabled = true;\n    this.health = MAX_HEALTH;\n    this.name = name;\n    this.points = 0;\n    this.onKill = onKill;\n    this.killed = false;\n  }\n\n  addDamage(damage = 0.1, killerId) {\n    this.health -= damage;\n    \n    if (this.health < 0) {\n      this.health = 0;\n    }\n    if (this.health <= 0) {\n      this.kill(killerId);\n    }\n  }\n\n  addPoints(points = 0) {\n    this.points += points;\n  }\n\n  kill(killerId) {\n    if (this.parent && !this.killed) {\n      this.killed = true;\n      this.onKill && this.onKill(killerId);\n      this.parent.remove(this);\n    }\n  }\n\n  draw(ctx, frame) {\n    Entity.prototype.draw.call(this, ctx, frame);\n    ctx.save();\n    ctx.fillStyle = 'rgba(0,0,0,0.5)';\n    ctx.beginPath();\n    ctx.rect(\n      this.position.x,\n      this.position.y - 10,\n      this.size.x,\n      4\n    );\n    ctx.fill();\n    ctx.closePath();\n    ctx.fillStyle = 'green';\n\n    ctx.beginPath();\n    ctx.rect(\n      this.position.x,\n      this.position.y - 10,\n      this.size.x * this.health,\n      4\n    );\n    ctx.fill();\n    ctx.closePath();\n\n    ctx.fillStyle = '#fff';    \n    ctx.fillText(this.name, this.position.x, this.position.y - 18);\n    ctx.restore();\n  }\n\n  fire(frame) {\n    if (frame % 5 == 0) {\n      let bullet = new Bullet(\n        this.position.x + this.size.x / 2,\n        this.position.y + this.size.y / 2,\n        this.id,\n        frame\n      );\n      this.parent.add(bullet);\n      let v = Vector2.subVecs(this.target, this.position);\n      bullet.velocity.copy(v.normalize().multiplyScalar(10));\n    }\n  }\n}\n\n\n/** WEBPACK FOOTER **\n ** ./game/Soldier.js\n **/","import Entity from '../lib/Entity';\n\nconst BULLET_LIFETIME = 60;\n\nexport default class Bullet extends Entity {\n  constructor(x, y, ownerId, startFrame) {\n    super(x, y, 6, 6);\n    this.noGrav = true;\n    this.noFriction = true;\n    this.ownerId = ownerId;\n    this.startFrame = startFrame;\n    this.type = 'bullet';\n    this.damagePoints = 0.1;\n    this.dontCollideWith = [this.type, 'soldier'];\n  }\n\n  setFrame(frame) {\n    this.frame = frame;\n  }\n\n  checkLifetime(currentFrame) {\n    return currentFrame - this.startFrame > BULLET_LIFETIME;\n  }\n}\n\n\n/** WEBPACK FOOTER **\n ** ./game/Bullet.js\n **/","import Entity from '../lib/Entity';\n\nexport default class Ground extends Entity {\n  constructor(x, y, width, height) {\n    super(x, y, width, height);\n    this.isFixed = true\n  }\n}\n\n\n/** WEBPACK FOOTER **\n ** ./game/Ground.js\n **/"],"sourceRoot":""}